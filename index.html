<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JK CHOPP ‚Äî Sistema Interno</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Estilos adicionais para garantir compatibilidade */
    .sidebar {
      position: fixed;
      top: 0;
      left: -320px;
      width: 320px;
      height: 100%;
      background: var(--panel);
      border-right: 1px solid var(--bd-soft);
      transition: left 0.3s ease;
      z-index: 1000;
      display: flex;
      flex-direction: column;
    }
    
    .sidebar.open {
      left: 0;
    }
    
    .sidebar-header {
      padding: 20px;
      border-bottom: 1px solid var(--bd-soft);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .sidebar-nav {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }
    
    .sidebar-footer {
      padding: 20px;
      border-top: 1px solid var(--bd-soft);
    }
    
    .user-info {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 15px;
    }
    
    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--brand);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }

    /* Garantir que os modais funcionem em todos os navegadores */
    dialog {
      border: 1px solid var(--bd-soft);
      border-radius: 16px;
      padding: 0;
      background: var(--card);
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      min-width: 500px;
      max-width: 90vw;
    }
    
    dialog::backdrop {
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(4px);
    }
    
    /* Estados para tags de status */
    .status-aberto { background: #1e3a8a; color: #dbeafe; }
    .status-andamento { background: #854d0e; color: #fef3c7; }
    .status-concluido { background: #166534; color: #dcfce7; }
    .status-cancelado { background: #991b1b; color: #fecaca; }
    
    /* Loading states */
    .btn:disabled {
      position: relative;
      opacity: 0.7;
      cursor: not-allowed;
    }
    
    .btn:disabled::after {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      animation: loading 1.5s infinite;
    }
    
    @keyframes loading {
      0% { left: -100%; }
      100% { left: 100%; }
    }
    
    /* Melhorias de responsividade */
    @media (max-width: 768px) {
      dialog {
        min-width: auto;
        width: 95vw;
        margin: 2.5vw;
      }
      
      .topbar .left .title h1 {
        font-size: 16px;
      }
      
      .top-actions {
        justify-content: center;
        width: 100%;
        margin-top: 10px;
      }
      
      .top-actions .btn {
        flex: 1;
        min-width: 120px;
        justify-content: center;
      }
    }
    
    @media (max-width: 480px) {
      .sidebar {
        width: 100%;
        left: -100%;
      }
      
      .brand .title h1 {
        font-size: 14px;
      }
      
      .brand .title small {
        font-size: 10px;
      }
    }

    /* Estilos para templates ocultos */
    .templates {
      display: none;
    }

    /* Anima√ß√µes de transi√ß√£o entre telas */
    .screen-transition {
      animation: fadeIn 0.3s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Estados vazios */
    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: var(--muted);
    }

    .empty-state .empty-icon {
      font-size: 48px;
      margin-bottom: 16px;
      opacity: 0.5;
    }
  </style>
</head>

<body data-theme="dark">
  <div class="app">
    <header>
      <div class="wrap topbar">
        <div class="left">
          <button class="hamburger" id="btnMenu" title="Abrir menu">‚ò∞</button>
          <div class="brand">
            <div class="logo">JK</div>
            <div class="title">
              <h1>JK CHOPP ‚Ä¢ Sistema Interno</h1>
              <small>Gest√£o Completa de Clientes, Pedidos, Estoque e Financeiro</small>
            </div>
          </div>
        </div>

        <div class="row top-actions">
          <button class="btn" id="btnTheme" title="Alternar tema">üåì Tema</button>
          <button class="btn" id="btnExport" title="Exportar backup">‚¨áÔ∏è Exportar</button>
          <label class="btn" for="importFile" title="Importar backup">‚¨ÜÔ∏è Importar</label>
          <input id="importFile" type="file" accept="application/json" class="hidden">
          <button class="btn" id="btnReset" title="Zerar base">üóëÔ∏è Zerar</button>
          <button class="btn" id="btnPerfil" title="Perfil">üë§ Perfil</button>
        </div>
      </div>
    </header>

    <main class="wrap">
      <section id="content" class="screen-transition">
        <!-- Conte√∫do din√¢mico ser√° injetado aqui via JavaScript -->
      </section>
    </main>

    <footer>
      <div class="wrap footer">
        <span>‚Ä¢ Sistema Completo Integrado</span>
        <span>Desenvolvido para JK CHOPP üç∫</span>
        <span id="statusConexao" class="status-online">‚óè Conectado</span>
      </div>
    </footer>
  </div>

  <!-- MENU LATERAL -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="brand">
        <div class="logo">JK</div>
        <div class="title">
          <h2>JK CHOPP</h2>
          <small>Sistema Integrado</small>
        </div>
      </div>
      <button class="btn ghost icon" id="btnCloseMenu" aria-label="Fechar menu">‚úï</button>
    </div>

    <nav class="sidebar-nav" id="sidebarNav">
      <button class="menu-item active" data-id="home">üè† In√≠cio</button>
      <button class="menu-item" data-id="pessoas">üë• Cadastro de Pessoas</button>
      <button class="menu-item" data-id="produtos">üß∞ Produtos/Equipamentos</button>
      <button class="menu-item" data-id="estoque">üì¶ Estoque</button>
      <button class="menu-item" data-id="pedidos">üìã Pedidos</button>
      <button class="menu-item" data-id="financeiro">üí∞ Financeiro</button>
      <button class="menu-item" data-id="contratos">üìÑ Contratos</button>
      <button class="menu-item" data-id="agendamentos">üìÖ Agenda</button>
      <div class="menu-divider"></div>
      <button class="menu-item" data-id="relatorios">üìä Relat√≥rios</button>
      <button class="menu-item" data-id="rel_repasse">üí∏ Repasse Financeiro</button>
      <div class="menu-divider"></div>
      <button class="menu-item" data-id="configuracoes">‚öôÔ∏è Configura√ß√µes</button>
    </nav>

    <div class="sidebar-footer">
      <div class="user-info">
        <div class="user-avatar">üë§</div>
        <div class="user-details">
          <strong id="userName">Administrador</strong>
          <small id="userEmail">admin@jkchopp.com</small>
        </div>
      </div>
      <div class="connection-status">
        <small id="dbStatus">üü¢ Supabase Conectado</small>
      </div>
    </div>
  </aside>

  <!-- MODAIS -->
  <!-- Modal Novo Pedido -->
  <dialog id="modalNovoPedido">
    <div class="modal-header">
      <h2 id="modalPedidoTitle">üìã Novo Pedido</h2>
      <button class="btn ghost icon close" aria-label="Fechar">‚úï</button>
    </div>

    <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
      <div class="stack">
        <div class="form-group">
          <label class="form-label">Cliente</label>
          <select id="ped_cliente" class="input" required>
            <option value="">Selecione um cliente...</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Produto</label>
          <select id="ped_produto" class="input">
            <option value="">Selecione um produto...</option>
          </select>
        </div>

        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">Quantidade</label>
            <input id="ped_quantidade" type="number" class="input" value="1" min="1">
          </div>
          <div class="form-group">
            <label class="form-label">Valor Unit√°rio</label>
            <input id="ped_valor_unitario" type="text" class="input" placeholder="0,00">
          </div>
        </div>

        <button class="btn" id="btnAddItem">‚ûï Adicionar Item</button>

        <h4>Itens do Pedido</h4>
        <div class="table-wrap">
          <table id="tblItensPedido">
            <thead>
              <tr>
                <th>Produto</th>
                <th>Quantidade</th>
                <th>Valor Unit.</th>
                <th>Total</th>
                <th>A√ß√µes</th>
              </tr>
            </thead>
            <tbody></tbody>
            <tfoot>
              <tr>
                <td colspan="3" class="text-right"><strong>Total:</strong></td>
                <td><strong id="ped_total">R$ 0,00</strong></td>
                <td></td>
              </tr>
            </tfoot>
          </table>
        </div>

        <div class="form-group">
          <label class="form-label">Observa√ß√µes</label>
          <textarea id="ped_observacoes" class="input" rows="3" placeholder="Observa√ß√µes do pedido..."></textarea>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn" id="btnCancelarPedido">Cancelar</button>
      <button class="btn success" id="btnFinalizarPedido">üíæ Salvar Pedido</button>
    </div>
  </dialog>

  <!-- Modal Detalhes Pedido -->
  <dialog id="modalDetalhesPedido">
    <div class="modal-header">
      <h2>Detalhes do Pedido <span id="ped_det_codigo"></span></h2>
      <button class="btn ghost icon close" aria-label="Fechar">‚úï</button>
    </div>

    <div class="modal-body">
      <div class="stack">
        <div class="info-grid">
          <div><strong>Cliente:</strong> <span id="ped_det_cliente"></span></div>
          <div><strong>Status:</strong> <span id="ped_det_status"></span></div>
          <div><strong>Data:</strong> <span id="ped_det_data"></span></div>
          <div><strong>Total:</strong> <span id="ped_det_total"></span></div>
        </div>

        <h4>Itens do Pedido</h4>
        <div class="table-wrap">
          <table id="tblItensPedidoDet">
            <thead>
              <tr>
                <th>Produto</th>
                <th>Quantidade</th>
                <th>Valor Unit.</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="form-group">
          <label class="form-label">Alterar Status</label>
          <select id="ped_det_status_edit" class="input">
            <option value="aberto">Aberto</option>
            <option value="andamento">Em Andamento</option>
            <option value="concluido">Conclu√≠do</option>
            <option value="cancelado">Cancelado</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Observa√ß√µes</label>
          <textarea id="ped_det_observacoes" class="input" rows="2" readonly></textarea>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn danger" id="btnExcluirPedido">üóëÔ∏è Excluir Pedido</button>
      <button class="btn" id="btnFecharDetalhes">Fechar</button>
      <button class="btn success" id="btnSalvarStatus">üíæ Salvar Status</button>
    </div>
  </dialog>

  <!-- Modal Perfil -->
  <dialog id="modalPerfil">
    <div class="modal-header">
      <h2>üë§ Perfil do Usu√°rio</h2>
      <button class="btn ghost icon close" aria-label="Fechar">‚úï</button>
    </div>

    <div class="modal-body">
      <div class="stack">
        <div class="form-group">
          <label class="form-label">Nome Completo</label>
          <input class="input" id="perf_nome" placeholder="Seu nome completo" />
        </div>
        
        <div class="form-group">
          <label class="form-label">E-mail</label>
          <input class="input" id="perf_email" type="email" placeholder="seu@email.com" />
        </div>
        
        <div class="form-group">
          <label class="form-label">Telefone/WhatsApp</label>
          <input class="input" id="perf_telefone" placeholder="(11) 99999-9999" />
        </div>
        
        <div class="form-group">
          <label class="form-label">Nova Senha</label>
          <input class="input" id="perf_senha" type="password" placeholder="Deixe em branco para manter a atual" />
          <small class="muted">M√≠nimo 6 caracteres</small>
        </div>
        
        <div class="form-group">
          <label class="form-label">Confirmar Senha</label>
          <input class="input" id="perf_confirmar_senha" type="password" placeholder="Repita a nova senha" />
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn" id="btnFecharPerfil">Fechar</button>
      <button class="btn success" id="btnSalvarPerfil">üíæ Salvar Altera√ß√µes</button>
    </div>
  </dialog>

  <!-- Modal Confirma√ß√£o -->
  <dialog id="modalConfirm">
    <div class="modal-header">
      <h2>Confirma√ß√£o</h2>
      <button class="btn ghost icon close" aria-label="Fechar">‚úï</button>
    </div>

    <div class="modal-body">
      <p id="confirmMessage">Tem certeza que deseja prosseguir com esta a√ß√£o?</p>
    </div>

    <div class="modal-footer">
      <button class="btn" id="btnConfirmCancel">Cancelar</button>
      <button class="btn danger" id="btnConfirmOk">Confirmar</button>
    </div>
  </dialog>

  <!-- TEMPLATES PARA TODAS AS TELAS -->
  <div class="templates">
    
    <!-- Template Home -->
    <template id="template-home">
      <div class="grid-home">
        <section class="card card-stats">
          <h3>üìä Vis√£o Geral do Sistema</h3>
          <div class="stats">
            <div class="stat">
              <span class="stat-value" id="homeClientesCount">0</span>
              <span class="stat-label">Clientes Cadastrados</span>
            </div>
            <div class="stat">
              <span class="stat-value" id="homeProdutosCount">0</span>
              <span class="stat-label">Produtos/Equipamentos</span>
            </div>
            <div class="stat">
              <span class="stat-value" id="homePedidosCount">0</span>
              <span class="stat-label">Pedidos Ativos</span>
            </div>
            <div class="stat">
              <span class="stat-value" id="homeFinanceiroTotal">R$ 0,00</span>
              <span class="stat-label">Saldo Financeiro</span>
            </div>
          </div>
        </section>

        <section class="card">
          <h3>üìÖ Pr√≥ximos Agendamentos</h3>
          <div class="toolbar">
            <div class="row">
              <input id="home_ag_titulo" class="input" placeholder="T√≠tulo do evento" />
              <input id="home_ag_data" class="input" type="date" />
              <input id="home_ag_hora" class="input" type="time" />
              <button class="btn success" id="homeAddAgenda">‚ûï Adicionar</button>
            </div>
          </div>
          <div class="table-wrap">
            <table class="table-compact">
              <thead><tr><th>Data</th><th>Hora</th><th>T√≠tulo</th><th>A√ß√µes</th></tr></thead>
              <tbody id="home_ag_tbody"></tbody>
            </table>
          </div>
        </section>

        <section class="card">
          <h3>üöÄ A√ß√µes R√°pidas</h3>
          <div class="flex" style="flex-wrap: wrap; gap: 10px; margin-top: 15px;">
            <button class="btn primary" id="goNovoPedido">üìã Novo Pedido</button>
            <button class="btn" id="goPessoas">üë• Pessoas</button>
            <button class="btn" id="goProdutos">üß∞ Produtos</button>
            <button class="btn" id="goEstoque">üì¶ Estoque</button>
            <button class="btn" id="goFinanceiro">üí∞ Financeiro</button>
          </div>
        </section>

        <section class="card">
          <h3>üìà Estat√≠sticas do Dia</h3>
          <div class="stats">
            <div class="stat">
              <span class="stat-value" id="homeHojeMov">0</span>
              <span class="stat-label">Movimenta√ß√µes Hoje</span>
            </div>
            <div class="stat">
              <span class="stat-value" id="homeHojePedidos">0</span>
              <span class="stat-label">Pedidos Hoje</span>
            </div>
          </div>
        </section>
      </div>
    </template>

    <!-- Template Pessoas -->
    <template id="template-pessoas">
      <div class="grid">
        <aside class="card">
          <h3>üë• Cadastro de Pessoas</h3>
          <p class="muted">Cadastro unificado de clientes, fornecedores, funcion√°rios e vendedores</p>

          <div class="stack">
            <input type="hidden" id="pessoa_id" />
            
            <div class="form-grid">
              <div class="form-group">
                <label class="form-label">Tipo de Pessoa *</label>
                <select id="pessoa_tipo" class="input" required>
                  <option value="">Selecione...</option>
                  <option value="PF">Pessoa F√≠sica</option>
                  <option value="PJ">Pessoa Jur√≠dica</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Categoria *</label>
                <select id="pessoa_categoria" class="input" required>
                  <option value="">Selecione...</option>
                  <option value="cliente">Cliente</option>
                  <option value="fornecedor">Fornecedor</option>
                  <option value="funcionario">Funcion√°rio</option>
                  <option value="vendedor">Vendedor</option>
                  <option value="outros">Outros</option>
                </select>
              </div>
            </div>

            <!-- Campos din√¢micos ser√£o preenchidos via JavaScript -->
            <div id="pessoa_form_dinamico"></div>

            <textarea class="input" id="pessoa_observacoes" placeholder="Observa√ß√µes..." rows="3"></textarea>

            <div class="flex">
              <button class="btn success" id="btnSalvarPessoa">üíæ Salvar Pessoa</button>
              <button class="btn" id="btnLimparPessoa">üßπ Limpar</button>
            </div>
          </div>
        </aside>

        <section class="card">
          <div class="toolbar">
            <div class="row">
              <input class="input" id="buscaPessoas" placeholder="Buscar pessoas..." />
              <select id="filtroCategoriaPessoa" class="input">
                <option value="">Todas as categorias</option>
                <option value="cliente">Clientes</option>
                <option value="fornecedor">Fornecedores</option>
                <option value="funcionario">Funcion√°rios</option>
                <option value="vendedor">Vendedores</option>
                <option value="outros">Outros</option>
              </select>
              <span class="muted" id="infoPessoas">0 pessoa(s)</span>
            </div>
          </div>

          <div class="table-wrap">
            <table id="tblPessoas">
              <thead>
                <tr>
                  <th>Nome/Raz√£o Social</th>
                  <th>Tipo</th>
                  <th>Categoria</th>
                  <th>Contato</th>
                  <th>A√ß√µes</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </section>
      </div>
    </template>

    <!-- Template Produtos -->
    <template id="template-produtos">
      <div class="grid">
        <aside class="card">
          <h3>üß∞ Cadastro de Produto/Equipamento</h3>
          <p class="muted">Cadastro de produtos, equipamentos e servi√ßos</p>

          <div class="stack">
            <input type="hidden" id="prod_id" />
            
            <input class="input" id="prod_nome" placeholder="Nome do produto" />
            <input class="input" id="prod_codigo" placeholder="C√≥digo interno (opcional)" />
            
            <div class="form-grid">
              <div class="form-group">
                <label class="form-label">Tipo</label>
                <select id="prod_tipo" class="input">
                  <option value="equipamento">Equipamento</option>
                  <option value="produto">Produto</option>
                  <option value="servico">Servi√ßo</option>
                  <option value="outro">Outro</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Categoria</label>
                <select id="prod_categoria" class="input">
                  <option value="chopeira">Chopeira</option>
                  <option value="barril">Barril</option>
                  <option value="cilindro">Cilindro CO‚ÇÇ</option>
                  <option value="acessorio">Acess√≥rio</option>
                  <option value="manutencao">Manuten√ß√£o</option>
                  <option value="outro">Outro</option>
                </select>
              </div>
            </div>

            <div class="form-grid">
              <div class="form-group">
                <label class="form-label">Pre√ßo de Venda</label>
                <input class="input" id="prod_preco" placeholder="0,00" type="text" />
              </div>
              <div class="form-group">
                <label class="form-label">Pre√ßo de Custo</label>
                <input class="input" id="prod_custo" placeholder="0,00" type="text" />
              </div>
            </div>

            <div class="form-grid">
              <div class="form-group">
                <label class="form-label">Estoque Atual</label>
                <input class="input" id="prod_estoque" type="number" value="0" />
              </div>
              <div class="form-group">
                <label class="form-label">Estoque M√≠nimo</label>
                <input class="input" id="prod_estoque_min" type="number" value="0" />
              </div>
            </div>

            <div class="flex">
              <label class="pill"><input type="checkbox" id="prod_controla_estoque" checked /> Controlar estoque</label>
              <label class="pill"><input type="checkbox" id="prod_ativo" checked /> Ativo</label>
            </div>

            <textarea class="input" id="prod_descricao" placeholder="Descri√ß√£o do produto..." rows="3"></textarea>

            <div class="flex">
              <button class="btn success" id="btnSalvarProduto">üíæ Salvar Produto</button>
              <button class="btn" id="btnLimparProduto">üßπ Limpar</button>
            </div>
          </div>
        </aside>

        <section class="card">
          <div class="toolbar">
            <div class="row">
              <input class="input" id="buscaProdutos" placeholder="Buscar produtos..." />
              <span class="muted" id="infoProdutos">0 produto(s)</span>
            </div>
          </div>

          <div class="table-wrap">
            <table id="tblProdutos">
              <thead>
                <tr>
                  <th>Nome</th>
                  <th>C√≥digo</th>
                  <th>Tipo</th>
                  <th>Pre√ßo</th>
                  <th>Estoque</th>
                  <th>Status</th>
                  <th>A√ß√µes</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </section>
      </div>
    </template>

    <!-- Templates para outras telas (estoque, pedidos, financeiro, etc.) -->
    <!-- Ser√£o carregados dinamicamente do script.js -->

  </div>

  <!-- SCRIPTS -->
  <!-- 1) Biblioteca do Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- 2) Configura√ß√£o Supabase -->
  <script src="./env.js"></script>

  <!-- 3) Sistema Principal Integrado -->
  <script>
    // Sistema de Navega√ß√£o Unificado
    class JKSistema {
      constructor() {
        this.telaAtual = 'home';
        this.supabase = window.supabase;
        this.init();
      }

      async init() {
        await this.testarConexaoSupabase();
        this.configurarNavega√ß√£o();
        this.carregarTela('home');
        this.configurarEventosGlobais();
      }

      async testarConexaoSupabase() {
        try {
          const { data, error } = await this.supabase.from('pessoas').select('count').limit(1);
          document.getElementById('dbStatus').textContent = 'üü¢ Supabase Conectado';
          document.getElementById('statusConexao').textContent = '‚óè Conectado';
        } catch (error) {
          document.getElementById('dbStatus').textContent = 'üî¥ Supabase Offline';
          document.getElementById('statusConexao').textContent = '‚óè Offline';
          console.warn('Supabase offline, usando localStorage');
        }
      }

      configurarNavega√ß√£o() {
        // Navega√ß√£o do menu
        document.getElementById('sidebarNav').addEventListener('click', (e) => {
          if (e.target.classList.contains('menu-item')) {
            const telaId = e.target.dataset.id;
            this.carregarTela(telaId);
            this.fecharMenu();
          }
        });

        // A√ß√µes r√°pidas da home
        document.addEventListener('click', (e) => {
          if (e.target.id === 'goNovoPedido') this.carregarTela('pedidos');
          if (e.target.id === 'goPessoas') this.carregarTela('pessoas');
          if (e.target.id === 'goProdutos') this.carregarTela('produtos');
          if (e.target.id === 'goEstoque') this.carregarTela('estoque');
          if (e.target.id === 'goFinanceiro') this.carregarTela('financeiro');
        });
      }

      carregarTela(telaId) {
        this.telaAtual = telaId;
        const content = document.getElementById('content');
        
        // Atualizar menu ativo
        document.querySelectorAll('.menu-item').forEach(item => {
          item.classList.remove('active');
          if (item.dataset.id === telaId) {
            item.classList.add('active');
          }
        });

        // Carregar template
        const template = document.getElementById(`template-${telaId}`);
        if (template) {
          content.innerHTML = template.innerHTML;
          this.inicializarTela(telaId);
        } else {
          content.innerHTML = `
            <div class="card">
              <div class="empty-state">
                <div class="empty-icon">üöß</div>
                <h3>Tela em Desenvolvimento</h3>
                <p>A tela "${telaId}" est√° sendo implementada.</p>
              </div>
            </div>
          `;
        }

        // Adicionar classe de transi√ß√£o
        content.classList.add('screen-transition');
        setTimeout(() => content.classList.remove('screen-transition'), 300);
      }

      inicializarTela(telaId) {
        // Inicializar eventos espec√≠ficos de cada tela
        switch(telaId) {
          case 'home':
            this.inicializarHome();
            break;
          case 'pessoas':
            this.inicializarPessoas();
            break;
          case 'produtos':
            this.inicializarProdutos();
            break;
          case 'pedidos':
            this.inicializarPedidos();
            break;
          // Adicionar outros casos conforme necess√°rio
        }
      }

      inicializarHome() {
        // Implementar l√≥gica da home
        console.log('Inicializando home...');
      }

      inicializarPessoas() {
        // Implementar l√≥gica de pessoas
        console.log('Inicializando pessoas...');
      }

      inicializarProdutos() {
        // Implementar l√≥gica de produtos
        console.log('Inicializando produtos...');
      }

      inicializarPedidos() {
        // Implementar l√≥gica de pedidos
        console.log('Inicializando pedidos...');
      }

      configurarEventosGlobais() {
        // Menu mobile
        document.getElementById('btnMenu').addEventListener('click', () => this.abrirMenu());
        document.getElementById('btnCloseMenu').addEventListener('click', () => this.fecharMenu());

        // Tema
        document.getElementById('btnTheme').addEventListener('click', () => this.alternarTema());

        // Overlay para fechar menu
        document.addEventListener('click', (e) => {
          if (e.target.classList.contains('app')) {
            this.fecharMenu();
          }
        });
      }

      abrirMenu() {
        document.getElementById('sidebar').classList.add('open');
      }

      fecharMenu() {
        document.getElementById('sidebar').classList.remove('open');
      }

      alternarTema() {
        const current = document.body.getAttribute("data-theme") || "dark";
        const next = current === "light" ? "dark" : "light";
        document.body.setAttribute("data-theme", next);
        localStorage.setItem("jk_theme", next);
      }
    }

    // Inicializar sistema quando DOM estiver pronto
    document.addEventListener('DOMContentLoaded', () => {
      window.jkSistema = new JKSistema();
    });

    // Exportar fun√ß√µes globais para compatibilidade
    window.carregarTela = (telaId) => window.jkSistema?.carregarTela(telaId);
  </script>

  <!-- 4) Script principal (compatibilidade) -->
  <script src="./script.js"></script>

</body>
</html>